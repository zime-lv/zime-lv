(this["webpackJsonplocal-currency-client"]=this["webpackJsonplocal-currency-client"]||[]).push([[53],{420:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),l=a(180),o=a(22),u=a(11),c=a(2),i=a(30),p=a(14),d=a(12),m=a(177),y=a(369),E=a(309),g=a(487),f=a(115),b=a(116),v=a(117),h=a(83),P=a(45),k=a(36);t.default=function(e){var t=Object.assign({namespace:"MyBusiness"},e),a=t.barrelGetters,C=a.userBusinesses,B=a.countBusinesses,K=a.businessesPerPage,T=a.activePageBusinesses,S=a.userBusinessesLoaded,w=a.activeBusiness,D=a.activeBusinessID,_=a.businessPurposes,O=a.countBusinessPurposes,I=a.businessPurposesPerPage,j=a.activePageBusinessPurposes,A=a.activeBusinesPurpose,x=a.activePurposeProperty,N=a.purposeShareholders,H=a.activePurposeData,R=a.accountNumber,L=t.barrelSetters,z=L.setRedirectTo,F=L.setResponseProps,q=L.setBusinessPurposes,J=L.setActiveBusiness,V=L.setActiveBusinesPurpose,G=L.setActivePurposeProperty,M=L.setActivePageBusinessPurposes,Q=L.setActivePurposeData,U=L.setPurposeRegistrationTitle,W=L.setPurposeRegistrationDescription,X=L.setPurposeRegistrationKeywords,Y=L.setClearRefs,Z=t.barrelFunctions,$=Z.getBusinesses,ee=Z.getBusinessPurposes,te=Z.getPurposeShareholders,ae=Z.sendRequest,ne=Z.showRequestStatus,re=Z.formatDate,se=Z.copyToClipboard,le=Z.findPurposes,oe=Object(d.a)([t.namespace]).t,ue=Object(n.useRef)(null),ce=Object(n.useRef)(null),ie=[],pe=[],de=0,me=0;null!==C&&Object.keys(C).map((function(t,a){return ie[a]=[],pe[a]=[],null!==_&&Object.keys(_).map((function(n,i){return de++,_[n].business_id===C[t].business_id&&(ie[a][i]=r.a.createElement(s.a.Item,{action:!0,key:_[n].purpose_id,eventKey:_[n].purpose_id,style:{cursor:"default"},onClick:function(){return function(e){var t=e.eventKey,a=e.purposeID;F(null),te(a,t)}({eventKey:i,purposeID:_[n].purpose_id})}},r.a.createElement("span",{style:{whiteSpace:"nowrap",cursor:"pointer"}},_[n].title),r.a.createElement("span",{style:{float:"right"}},r.a.createElement(m.a,{onClick:function(e){U(null!==_[n].title?_[n].title:""),W(null!==_[n].description?_[n].description:""),X(null!==_[n].keywords?_[n].keywords:""),Q(JSON.stringify(_[n])),V("addPurpose"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),pe[a][i]=r.a.createElement(l.a.Pane,{key:_[n].purpose_id,eventKey:_[n].purpose_id},r.a.createElement(o.a,{defaultActiveKey:null!==x?x:"purpose_id"},r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"purpose_id",onClick:function(){return G("purpose_id")}},oe("Purpose ID")),r.a.createElement(o.a.Collapse,{eventKey:"purpose_id"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,r.a.createElement("input",{ref:ce,className:"no-focus",readOnly:!0,style:{border:0,width:"15rem",background:"Transparent"},type:"text",defaultValue:_[n].purpose_id}),document.queryCommandSupported("copy")&&r.a.createElement("span",{style:{float:"right",marginLeft:"0.25rem"}},r.a.createElement("button",{className:"button-transparent",onClick:function(){return se(ce)}},r.a.createElement(y.a,{style:{color:"var(--dark)"}}))))))),r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"shareholders",onClick:function(){return G("shareholders")}},r.a.createElement("span",{style:{cursor:"pointer"}},oe("Purpose Shareholders")),r.a.createElement("span",{style:{float:"right"}},r.a.createElement(E.a,{onClick:function(e){G("addShareholder"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),r.a.createElement(o.a.Collapse,{eventKey:"addShareholder"},r.a.createElement(u.a.Body,null,r.a.createElement(v.default,Object.assign({},e,{purposeID:_[n].purpose_id})))),r.a.createElement(o.a.Collapse,{eventKey:"shareholders"},r.a.createElement(u.a.Body,null,"undefined"!==typeof N&&null!==N&&Object.keys(N).map((function(t,a){if(N[t].purpose_id===_[n].purpose_id){var s=N[t].purpose_id,l=N[t],o=l.shareholder_id,u=l.firstname,c=l.lastname,i=l.roles,p=l.share;me++;var d=null!==i?i.split(","):[];return r.a.createElement(h.default,Object.assign({},e,{key:a,id:a,shareholder:o,purpose:s,firstname:u,lastname:c,share:p,roles:d}))}return""})),ne("get purpose shareholders / SELECT shares",me,oe("Loading shareholders..."),oe("No shareholders"),"finished")))),r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"productStatus",onClick:function(){return G("productStatus")}},oe("Purpose Status")),r.a.createElement(o.a.Collapse,{eventKey:"productStatus"},r.a.createElement(u.a.Body,{onClick:function(e){var t=_;t[n].status=0===_[n].status?1:0,q(JSON.stringify(t));var a={};return a.purpose_id=_[n].purpose_id,a.purpose_status=_[n].status,ae({req:"change purpose status",data:a})}},r.a.createElement(c.a,null,"undefined"===typeof N||null===N&&r.a.createElement(c.a.Text,null,oe("To publish, please add at least one shareholder"),r.a.createElement("br",null),r.a.createElement("br",null)),"undefined"!==typeof N&&null!==N&&r.a.createElement(c.a.Check,{type:"switch",custom:!0,disabled:"undefined"===typeof N||null===N,label:oe(0===_[n].status?"Not published":"Published"),checked:1===_[n].status,onChange:function(e){console.log(e)}}))))),r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"title",onClick:function(){return G("title")}},r.a.createElement("span",{style:{cursor:"pointer"}},oe("Purpose Title"))),r.a.createElement(o.a.Collapse,{eventKey:"title"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,_[n].title)))),r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"description",onClick:function(){return G("description")}},r.a.createElement("span",{style:{cursor:"pointer"}},oe("Purpose Description"))),r.a.createElement(o.a.Collapse,{eventKey:"description"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,_[n].description)))),r.a.createElement(u.a,{bg:"light"},r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"keywords",onClick:function(){return G("keywords")}},r.a.createElement("span",{style:{cursor:"pointer"}},oe("Purpose Keywords"))),r.a.createElement(o.a.Collapse,{eventKey:"keywords"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,_[n].keywords))))))),me=0,!0})),!0}));var ye=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{defaultActiveKey:null===w&&S?"myBusinesses":w},null!==C&&Object.keys(C).map((function(t,a){var n=new Date(C[t].created),c=re(n,{month:"long",day:"numeric",year:"numeric"});return r.a.createElement(u.a,{key:a},r.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:a,style:{cursor:"pointer"},onClick:function(){return function(e){var t=e.eventKey,a=e.businessID;w===t?(J(null),M(null)):(F(null),ee(a,t,1))}({eventKey:a,businessID:C[t].business_id})}},r.a.createElement(g.a,{style:{color:"var(--dark)"}})," ",C[t].title),r.a.createElement(o.a.Collapse,{eventKey:a},r.a.createElement(u.a.Body,null,r.a.createElement(l.a.Container,{id:"left-tabs-example",defaultActiveKey:null!==A?A:"aboutBusiness"},r.a.createElement(i.a,{style:{marginBottom:"1.2rem"}},r.a.createElement(p.a,null,r.a.createElement(k.default,Object.assign({advancedSearch:!1,placeholder:oe("Find purposes..."),captionAdvancedSearch:oe("Advanced search"),onSubmit:le},e)))),r.a.createElement(i.a,null,r.a.createElement(p.a,{sm:5},r.a.createElement(s.a,{variant:"flush"},r.a.createElement(s.a.Item,{action:!0,eventKey:"aboutBusiness",style:{cursor:"default"},onClick:function(e){Q(null),V(null),e.stopPropagation()}},r.a.createElement("span",{style:{whiteSpace:"nowrap",cursor:"pointer"}},oe("About")),r.a.createElement("span",{style:{float:"right"}},r.a.createElement(E.a,{onClick:function(e){Y(!0),Q(null),V("addPurpose"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),ie[a]),null!==O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(P.default,Object.assign({},e,{size:"sm",countItems:O,itemsPerPage:I,active:j,onClick:function(e){return ee(D,0,e)}}))),ne("get business purposes / SELECT purposes",de,oe("Loading purposes..."),oe("No purposes"),"finished")),r.a.createElement(p.a,{sm:7},r.a.createElement(l.a.Content,null,r.a.createElement(l.a.Pane,{eventKey:"aboutBusiness"},r.a.createElement(o.a,{defaultActiveKey:"businessID"},r.a.createElement(u.a,null,r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessID"},oe("Business ID")),r.a.createElement(o.a.Collapse,{eventKey:"businessID"},r.a.createElement(u.a,{border:"light"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,r.a.createElement("input",{ref:ue,className:"no-focus",readOnly:!0,style:{border:0,width:"13rem",background:"Transparent"},type:"text",defaultValue:C[t].business_id}),document.queryCommandSupported("copy")&&r.a.createElement("span",{style:{float:"right",marginLeft:"0.25rem"}},r.a.createElement("button",{className:"button-transparent",onClick:function(){return se(ue)}},r.a.createElement(y.a,{style:{color:"var(--dark)"}})))))))),r.a.createElement(u.a,null,r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessDescription"},oe("Business Description")),r.a.createElement(o.a.Collapse,{eventKey:"businessDescription"},r.a.createElement(u.a,{border:"light"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,""!==C[t].description?C[t].description:r.a.createElement("span",{className:"text-center text-muted"},oe("No description"))))))),r.a.createElement(u.a,null,r.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessCreationDate"},oe("Business Created")),r.a.createElement(o.a.Collapse,{eventKey:"businessCreationDate"},r.a.createElement(u.a,{border:"light"},r.a.createElement(u.a.Body,null,r.a.createElement(u.a.Text,null,c))))))),pe[a],r.a.createElement(l.a.Pane,{eventKey:"addPurpose"},r.a.createElement(o.a,{defaultActiveKey:"newPurpose"},r.a.createElement(u.a,null,r.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:"newPurpose",style:{cursor:"default"}},oe(null===H?"New Purpose":"Edit Purpose")),r.a.createElement(o.a.Collapse,{eventKey:"newPurpose"},r.a.createElement(u.a.Body,null,r.a.createElement(b.default,Object.assign({},e,{businessID:C[t].business_id,id:null!==H?H.id:null,purposeID:null!==H?H.purpose_id:null,title:null!==H?H.title:"",description:null!==H?H.description:"",category:null!==H?H.category:"",subcategory:null!==H?H.subcategory:"",subcategory2:null!==H?H.subcategory2:"",keywords:null!==H?H.keywords:""}))))))))))))))})),r.a.createElement(u.a,null,r.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:"addBusiness",style:{cursor:"pointer"},onClick:function(){return J("addBusiness"!==w?"addBusiness":null)}},r.a.createElement("span",null,r.a.createElement(E.a,{style:{color:"var(--dark)",fontSize:"1.2rem",paddingBottom:"0.2rem"}}),"\xa0",oe("Add Business"))),r.a.createElement(o.a.Collapse,{eventKey:"addBusiness"},r.a.createElement(u.a.Body,null,r.a.createElement(f.default,e))))),null!==C&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(P.default,Object.assign({},e,{size:"md",countItems:B,itemsPerPage:K,active:T,onClick:function(e){return $(e)}}))));return null===R&&z("/sign-out"),r.a.createElement(r.a.Fragment,null,ye)}}}]);
//# sourceMappingURL=53.b6502452.chunk.js.map