(this["webpackJsonplocal-currency-client"]=this["webpackJsonplocal-currency-client"]||[]).push([[54],{421:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(35),l=a(180),o=a(22),u=a(11),c=a(2),i=a(30),p=a(14),d=a(12),m=a(177),y=a(369),E=a(309),g=a(487),f=a(115),v=a(116),b=a(117),h=a(83),P=a(45),k=a(36),B=a(84);t.default=function(e){var t=Object.assign({namespace:"MyBusiness"},e),a=t.barrelGetters,C=a.userBusinesses,K=a.countBusinesses,T=a.businessesPerPage,S=a.activePageBusinesses,w=a.userBusinessesLoaded,D=a.activeBusiness,_=a.activeBusinessID,O=a.businessPurposes,I=a.countBusinessPurposes,j=a.businessPurposesPerPage,A=a.activePageBusinessPurposes,x=a.activeBusinesPurpose,H=a.activePurposeProperty,N=a.purposeShareholders,R=a.activePurposeData,z=a.accountNumber,F=t.barrelSetters,L=F.setRedirectTo,q=F.setResponseProps,J=F.setBusinessPurposes,G=F.setActiveBusiness,M=F.setActiveBusinesPurpose,V=F.setActivePurposeProperty,Q=F.setActivePageBusinessPurposes,U=F.setActivePurposeData,W=F.setPurposeRegistrationTitle,X=F.setPurposeRegistrationDescription,Y=F.setPurposeRegistrationKeywords,Z=F.setClearRefs,$=t.barrelFunctions,ee=$.getBusinesses,te=$.getBusinessPurposes,ae=$.getPurposeShareholders,ne=$.sendRequest,se=$.showRequestStatus,re=$.formatDate,le=$.copyToClipboard,oe=$.findPurposes,ue=Object(d.a)([t.namespace]).t,ce=(Object(n.useRef)(null),Object(n.useRef)(null)),ie=[],pe=[],de=0,me=0;null!==C&&Object.keys(C).map((function(t,a){return ie[a]=[],pe[a]=[],null!==O&&Object.keys(O).map((function(n,i){return de++,O[n].business_id===C[t].business_id&&(ie[a][i]=s.a.createElement(r.a.Item,{action:!0,key:O[n].purpose_id,eventKey:O[n].purpose_id,style:{cursor:"default"},onClick:function(){return function(e){var t=e.eventKey,a=e.purposeID;q(null),ae(a,t)}({eventKey:i,purposeID:O[n].purpose_id})}},s.a.createElement("span",{style:{whiteSpace:"nowrap",cursor:"pointer"}},O[n].title),s.a.createElement("span",{style:{float:"right"}},s.a.createElement(m.a,{onClick:function(e){W(null!==O[n].title?O[n].title:""),X(null!==O[n].description?O[n].description:""),Y(null!==O[n].keywords?O[n].keywords:""),U(JSON.stringify(O[n])),M("addPurpose"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),pe[a][i]=s.a.createElement(l.a.Pane,{key:O[n].purpose_id,eventKey:O[n].purpose_id},s.a.createElement(o.a,{defaultActiveKey:null!==H?H:"purpose_id"},s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"purpose_id",onClick:function(){return V("purpose_id")}},ue("Purpose ID")),s.a.createElement(o.a.Collapse,{eventKey:"purpose_id"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,s.a.createElement("input",{ref:ce,className:"no-focus",readOnly:!0,style:{border:0,width:"15rem",background:"Transparent"},type:"text",defaultValue:O[n].purpose_id}),document.queryCommandSupported("copy")&&s.a.createElement("span",{style:{float:"right",marginLeft:"0.25rem"}},s.a.createElement("button",{className:"button-transparent",onClick:function(){return le(ce)}},s.a.createElement(y.a,{style:{color:"var(--dark)"}}))))))),s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"shareholders",onClick:function(){return V("shareholders")}},s.a.createElement("span",{style:{cursor:"pointer"}},ue("Purpose Shareholders")),s.a.createElement("span",{style:{float:"right"}},s.a.createElement(E.a,{onClick:function(e){V("addShareholder"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),s.a.createElement(o.a.Collapse,{eventKey:"addShareholder"},s.a.createElement(u.a.Body,null,s.a.createElement(b.default,Object.assign({},e,{purposeID:O[n].purpose_id})))),s.a.createElement(o.a.Collapse,{eventKey:"shareholders"},s.a.createElement(u.a.Body,null,"undefined"!==typeof N&&null!==N&&Object.keys(N).map((function(t,a){if(N[t].purpose_id===O[n].purpose_id){var r=N[t].purpose_id,l=N[t],o=l.shareholder_id,u=l.firstname,c=l.lastname,i=l.roles,p=l.share;me++;var d=null!==i?i.split(","):[];return s.a.createElement(h.default,Object.assign({},e,{key:a,id:a,shareholder:o,purpose:r,firstname:u,lastname:c,share:p,roles:d}))}return""})),se("get purpose shareholders / SELECT shares",me,ue("Loading shareholders..."),ue("No shareholders"),"finished")))),s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"productStatus",onClick:function(){return V("productStatus")}},ue("Purpose Status")),s.a.createElement(o.a.Collapse,{eventKey:"productStatus"},s.a.createElement(u.a.Body,{onClick:function(e){var t=O;t[n].status=0===O[n].status?1:0,J(JSON.stringify(t));var a={};return a.purpose_id=O[n].purpose_id,a.purpose_status=O[n].status,ne({req:"change purpose status",data:a})}},s.a.createElement(c.a,null,"undefined"===typeof N||null===N&&s.a.createElement(c.a.Text,null,ue("To publish, please add at least one shareholder"),s.a.createElement("br",null),s.a.createElement("br",null)),"undefined"!==typeof N&&null!==N&&s.a.createElement(c.a.Check,{type:"switch",custom:!0,disabled:"undefined"===typeof N||null===N,label:ue(0===O[n].status?"Not published":"Published"),checked:1===O[n].status,onChange:function(e){console.log(e)}}))))),s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"title",onClick:function(){return V("title")}},s.a.createElement("span",{style:{cursor:"pointer"}},ue("Purpose Title"))),s.a.createElement(o.a.Collapse,{eventKey:"title"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,O[n].title)))),s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"description",onClick:function(){return V("description")}},s.a.createElement("span",{style:{cursor:"pointer"}},ue("Purpose Description"))),s.a.createElement(o.a.Collapse,{eventKey:"description"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,O[n].description)))),s.a.createElement(u.a,{bg:"light"},s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"default"},eventKey:"keywords",onClick:function(){return V("keywords")}},s.a.createElement("span",{style:{cursor:"pointer"}},ue("Purpose Keywords"))),s.a.createElement(o.a.Collapse,{eventKey:"keywords"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,O[n].keywords))))))),me=0,!0})),!0}));var ye=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{defaultActiveKey:null===D&&w?"myBusinesses":D},null!==C&&Object.keys(C).map((function(t,a){var n=new Date(C[t].created),c=re(n,{month:"long",day:"numeric",year:"numeric"});return s.a.createElement(u.a,{key:a},s.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:a,style:{cursor:"pointer"},onClick:function(){return function(e){var t=e.eventKey,a=e.businessID;D===t?(G(null),Q(null)):(q(null),te(a,t,1))}({eventKey:a,businessID:C[t].business_id})}},s.a.createElement(g.a,{style:{color:"var(--dark)"}})," ",C[t].title),s.a.createElement(o.a.Collapse,{eventKey:a},s.a.createElement(u.a.Body,null,s.a.createElement(l.a.Container,{id:"left-tabs-example",defaultActiveKey:null!==x?x:"aboutBusiness"},s.a.createElement(i.a,{style:{marginBottom:"1.2rem"}},s.a.createElement(p.a,null,s.a.createElement(k.default,Object.assign({advancedSearch:!1,placeholder:ue("Find purposes..."),captionAdvancedSearch:ue("Advanced search"),onSubmit:oe},e)))),s.a.createElement(i.a,null,s.a.createElement(p.a,{sm:5},s.a.createElement(r.a,{variant:"flush"},s.a.createElement(r.a.Item,{action:!0,eventKey:"aboutBusiness",style:{cursor:"default"},onClick:function(e){U(null),M(null),e.stopPropagation()}},s.a.createElement("span",{style:{whiteSpace:"nowrap",cursor:"pointer"}},ue("About")),s.a.createElement("span",{style:{float:"right"}},s.a.createElement(E.a,{onClick:function(e){Z(!0),U(null),M("addPurpose"),e.stopPropagation()},fontSize:"small",style:{color:"var(--dark)",cursor:"pointer"}}))),ie[a]),null!==I&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement(P.default,Object.assign({},e,{size:"sm",countItems:I,itemsPerPage:j,active:A,onClick:function(e){return te(_,0,e)}}))),se("get business purposes / SELECT purposes",de,ue("Loading purposes..."),ue("No purposes"),"finished")),s.a.createElement(p.a,{sm:7},s.a.createElement(l.a.Content,null,s.a.createElement(l.a.Pane,{eventKey:"aboutBusiness"},s.a.createElement(o.a,{defaultActiveKey:"businessID"},s.a.createElement(u.a,null,s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessID"},ue("Business ID")),s.a.createElement(o.a.Collapse,{eventKey:"businessID"},s.a.createElement(u.a,{border:"light"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,s.a.createElement(B.default,Object.assign({value:C[t].business_id},e))))))),s.a.createElement(u.a,null,s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessDescription"},ue("Business Description")),s.a.createElement(o.a.Collapse,{eventKey:"businessDescription"},s.a.createElement(u.a,{border:"light"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,""!==C[t].description?C[t].description:s.a.createElement("span",{className:"text-center text-muted"},ue("No description"))))))),s.a.createElement(u.a,null,s.a.createElement(o.a.Toggle,{as:u.a.Header,style:{cursor:"pointer"},eventKey:"businessCreationDate"},ue("Business Created")),s.a.createElement(o.a.Collapse,{eventKey:"businessCreationDate"},s.a.createElement(u.a,{border:"light"},s.a.createElement(u.a.Body,null,s.a.createElement(u.a.Text,null,c))))))),pe[a],s.a.createElement(l.a.Pane,{eventKey:"addPurpose"},s.a.createElement(o.a,{defaultActiveKey:"newPurpose"},s.a.createElement(u.a,null,s.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:"newPurpose",style:{cursor:"default"}},ue(null===R?"New Purpose":"Edit Purpose")),s.a.createElement(o.a.Collapse,{eventKey:"newPurpose"},s.a.createElement(u.a.Body,null,s.a.createElement(v.default,Object.assign({},e,{businessID:C[t].business_id,id:null!==R?R.id:null,purposeID:null!==R?R.purpose_id:null,title:null!==R?R.title:"",description:null!==R?R.description:"",category:null!==R?R.category:"",subcategory:null!==R?R.subcategory:"",subcategory2:null!==R?R.subcategory2:"",keywords:null!==R?R.keywords:""}))))))))))))))})),s.a.createElement(u.a,null,s.a.createElement(o.a.Toggle,{as:u.a.Header,eventKey:"addBusiness",style:{cursor:"pointer"},onClick:function(){return G("addBusiness"!==D?"addBusiness":null)}},s.a.createElement("span",null,s.a.createElement(E.a,{style:{color:"var(--dark)",fontSize:"1.2rem",paddingBottom:"0.2rem"}}),"\xa0",ue("Add Business"))),s.a.createElement(o.a.Collapse,{eventKey:"addBusiness"},s.a.createElement(u.a.Body,null,s.a.createElement(f.default,e))))),null!==C&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement(P.default,Object.assign({},e,{size:"md",countItems:K,itemsPerPage:T,active:S,onClick:function(e){return ee(e)}}))));return null===z&&L("/sign-out"),s.a.createElement(s.a.Fragment,null,ye)}}}]);
//# sourceMappingURL=54.ee59ff14.chunk.js.map